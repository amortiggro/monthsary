<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=3.0, minimum-scale=0.5">
    <title>CSS Envelope + Letter (Open/Close on Click)</title>
    <style>
        :root{
          --primary: #fdf2f8;
          --bg-color: #fce7f3;
          --bg-envelope-color: #fce7f3;
          --envelope-tab: #fbcfe8;
          --envelope-cover: #f9a8d4;
          --shadow-color: rgba(236, 72, 153, 0.2);
          --txt-color: #831843;
          --heart-color: #be185d;
        }
        * {
          box-sizing: border-box;
        }

        body{
          margin: 0;
          padding: 0;
          background: var(--bg-color);
          display: flex;
          align-items: center;
          justify-content: center;
          min-height: 100vh;
          overflow-x: hidden;
        }
        .container {
          min-height: 100vh;
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 20px;
        }
        .container > .envelope-wrapper {
          box-shadow: 0 0 40px var(--shadow-color);
          border-radius: 15px;
          overflow: visible;
          position: relative;
          cursor: pointer;
          touch-action: manipulation;
          -webkit-tap-highlight-color: transparent;
        }
        .envelope-wrapper > .envelope {
          position: relative;
          width: 450px;
          height: 345px;
        }

        .envelope-wrapper::before {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          width: 450px;
          height: 345px;
          background: var(--bg-envelope-color);
          border-radius: 15px;
          z-index: 0;
        }
        .envelope-wrapper > .envelope::before {
          content: "";
          position: absolute;
          top: 0;
          z-index: 3;
          border-top: 195px solid var(--envelope-tab);
          border-right: 225px solid transparent;
          border-left: 225px solid transparent;
          transform-origin: top;
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s;
          border-top-left-radius: 15px;
          border-top-right-radius: 15px;
        }
        .envelope-wrapper > .envelope::after {
          content: "";
          position: absolute;
          z-index: 2;
          width: 0px;
          height: 0px;
          border-top: 195px solid transparent;
          border-right: 225px solid var(--envelope-cover);
          border-bottom: 150px solid var(--envelope-cover);
          border-left: 225px solid var(--envelope-cover);
          border-bottom-left-radius: 15px;
          border-bottom-right-radius: 15px;
        }
        .envelope > .letter {
          position: absolute;
          right: 20%;
          bottom: 0;
          width: 54%;
          height: 80%;
          background: var(--primary);
          text-align: center;
          transition: all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
          box-shadow: 0 0 5px var(--shadow-color);
          padding: 20px 10px;
          border-radius: 8px;
          z-index: 1;
        }

        .envelope > .letter > .text {
          font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
          color: var(--txt-color);
          text-align: left;
          font-size: 10px;
        }
        .heart {
          position: absolute;
          top: 50%;
          left: 50%;
          width: 25px;
          height: 25px;
          background: var(--heart-color);
          z-index: 4;
          transform: translate(-50%, -30%) rotate(45deg);
          transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
          box-shadow: 0 3px 12px var(--shadow-color);
          cursor: pointer;
          border-radius: 2px;
        }

        .heart:hover {
          transform: translate(-50%, -30%) rotate(45deg) scale(1.1);
          box-shadow: 0 4px 16px var(--shadow-color);
        }
        .heart:before,
        .heart:after {
          content: "";
          position: absolute;
          width: 25px;
          height: 25px;
          background-color: var(--heart-color);
          border-radius: 50%;
        }
        .heart:before {
          top: -12.5px;
        }
        .heart:after {
          right: 12.5px;
        }
        .flap > .envelope:before {
          transform: rotateX(180deg);
          z-index: 0;
        }
        .flap > .envelope > .letter {
          bottom: 150px;
          transform: scale(1.5);
          transition-delay: 0.8s;
        }
        .flap > .heart {
          transform: translate(-50%, -30%) rotate(90deg) scale(1.1);
          transition-delay: 0.2s;
        }

        /* Floating hearts animation */
        .floating-heart {
          position: fixed;
          width: 15px;
          height: 15px;
          background: var(--heart-color);
          transform: rotate(45deg);
          opacity: 0;
          pointer-events: none;
          z-index: 1000;
          border-radius: 2px;
        }

        .floating-heart:before,
        .floating-heart:after {
          content: "";
          position: absolute;
          width: 15px;
          height: 15px;
          background-color: var(--heart-color);
          border-radius: 50%;
        }

        .floating-heart:before {
          top: -7.5px;
        }

        .floating-heart:after {
          right: 7.5px;
        }

        .floating-heart.animate {
          animation: floatUp 3s ease-out forwards;
        }

        @keyframes floatUp {
          0% {
            opacity: 1;
            transform: translateY(0) translateX(0) rotate(45deg) scale(0.3);
          }
          25% {
            opacity: 0.9;
            transform: translateY(-80px) translateX(20px) rotate(45deg) scale(1);
          }
          50% {
            opacity: 0.7;
            transform: translateY(-160px) translateX(-10px) rotate(45deg) scale(1.1);
          }
          75% {
            opacity: 0.4;
            transform: translateY(-240px) translateX(30px) rotate(45deg) scale(0.8);
          }
          100% {
            opacity: 0;
            transform: translateY(-320px) translateX(-20px) rotate(45deg) scale(0.2);
          }
        }

        /* Hidden pictures inside envelope */
        .hidden-pictures {
          position: absolute;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 1;
          pointer-events: none;
        }

        .envelope-picture {
          position: absolute;
          width: 60px;
          height: 60px;
          object-fit: cover;
          border-radius: 8px;
          opacity: 0;
          transform: scale(0.1);
          transition: all 0.3s ease;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
          border: 2px solid white;
        }

        /* Floating picture animations */
        .floating-picture {
          position: fixed;
          width: 80px;
          height: 80px;
          object-fit: cover;
          border-radius: 12px;
          opacity: 0;
          pointer-events: none;
          z-index: 1000;
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
          border: 3px solid white;
          transform: scale(0.1);
        }

        .floating-picture.small {
          width: 60px;
          height: 60px;
        }

        .floating-picture.large {
          width: 100px;
          height: 100px;
        }

        .floating-picture.animate {
          animation: pictureFloat 3s ease-out forwards;
        }

        .floating-picture.orbit {
          animation: orbitAroundEnvelope 8s ease-in-out infinite;
        }

        @keyframes pictureFloat {
          0% {
            opacity: 1;
            transform: translateY(0) translateX(0) rotate(0deg) scale(0.1);
          }
          20% {
            opacity: 1;
            transform: translateY(-60px) translateX(20px) rotate(10deg) scale(0.9);
          }
          40% {
            opacity: 1;
            transform: translateY(-120px) translateX(-30px) rotate(-5deg) scale(1);
          }
          60% {
            opacity: 1;
            transform: translateY(-180px) translateX(40px) rotate(15deg) scale(1);
          }
          80% {
            opacity: 1;
            transform: translateY(-220px) translateX(-20px) rotate(-8deg) scale(1);
          }
          100% {
            opacity: 1;
            transform: translateY(-250px) translateX(10px) rotate(5deg) scale(1);
          }
        }

        @keyframes orbitAroundEnvelope {
          0% {
            transform: translateY(0px) translateX(0px) rotate(0deg) scale(1);
          }
          25% {
            transform: translateY(-10px) translateX(15px) rotate(5deg) scale(1.02);
          }
          50% {
            transform: translateY(0px) translateX(0px) rotate(-3deg) scale(1);
          }
          75% {
            transform: translateY(-10px) translateX(-15px) rotate(8deg) scale(1.02);
          }
          100% {
            transform: translateY(0px) translateX(0px) rotate(0deg) scale(1);
          }
        }

        /* Mobile Responsive Styles */
        @media screen and (max-width: 768px) {
          body {
            padding: 10px;
            overflow-x: hidden;
          }

          .container {
            padding: 20px 10px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .envelope-wrapper {
            width: 280px !important;
            height: 215px !important;
            transform: none !important;
            max-width: 90vw !important;
            max-height: 70vh !important;
          }

          .envelope-wrapper::before {
            width: 280px !important;
            height: 215px !important;
          }

          .envelope-wrapper > .envelope {
            width: 280px !important;
            height: 215px !important;
          }

          .envelope-wrapper > .envelope::before {
            border-top: 122px solid var(--envelope-tab) !important;
            border-right: 140px solid transparent !important;
            border-left: 140px solid transparent !important;
          }

          .envelope-wrapper > .envelope::after {
            border-top: 122px solid transparent !important;
            border-right: 140px solid var(--envelope-cover) !important;
            border-bottom: 93px solid var(--envelope-cover) !important;
            border-left: 140px solid var(--envelope-cover) !important;
          }

          .envelope > .letter {
            width: 54% !important;
            height: 80% !important;
            padding: 12px 6px !important;
          }

          .flap > .envelope > .letter {
            bottom: 93px !important;
            transform: scale(1.2) !important;
          }

          .text {
            font-size: 9px !important;
            line-height: 1.3 !important;
            padding: 6px !important;
          }

          .text strong {
            font-size: 11px !important;
          }

          .text p {
            margin: 3px 0 !important;
          }

          /* Adjust floating pictures for mobile */
          .floating-picture {
            width: 40px !important;
            height: 40px !important;
          }

          .floating-picture.small {
            width: 30px !important;
            height: 30px !important;
          }

          .floating-picture.large {
            width: 50px !important;
            height: 50px !important;
          }

          /* Adjust floating hearts for mobile */
          .floating-heart {
            width: 15px !important;
            height: 15px !important;
          }

          .floating-heart::before,
          .floating-heart::after {
            width: 15px !important;
            height: 15px !important;
          }

          .floating-heart:before {
            top: -7.5px !important;
          }

          .floating-heart:after {
            right: 7.5px !important;
          }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="envelope-wrapper">
            <div class="envelope">
                <div class="letter">
                    <div class="text">
                        <strong>Dear Mahal.</strong>
                        <p>
                            Happy 32nd months of love! I love you so much
                            I'm thankful that you came to my life, you gave me strenght, you gave me courage, and most of all you gave life to my miserable life.
                            I'll forever love you, through ups and downs. I will love you no matter what. And I will love you till the end of time.
                            I love you so much, forever and ever.
                        </p>
                        <p>  With love,
                        </p>
                        <p>
                            -Rave
                        </p>
                    </div>
                </div>
                <!-- Hidden pictures inside envelope -->
                <div class="hidden-pictures">
                    <img src="picture1.jpg" alt="Memory 1" class="envelope-picture" data-picture="1">
                    <img src="picture2.jpg" alt="Memory 2" class="envelope-picture" data-picture="2">
                    <img src="picture3.jpg" alt="Memory 3" class="envelope-picture" data-picture="3">
                    <img src="picture4.jpg" alt="Memory 4" class="envelope-picture" data-picture="4">
                    <img src="picture5.jpg" alt="Memory 5" class="envelope-picture" data-picture="5">
                    <img src="picture6.jpg" alt="Memory 6" class="envelope-picture" data-picture="6">
                    <img src="picture7.jpg" alt="Memory 7" class="envelope-picture" data-picture="7">
                    <img src="picture8.jpg" alt="Memory 8" class="envelope-picture" data-picture="8">
                </div>
            </div>
            <div class="heart"></div>
        </div>
    </div>
    <script>
        const envelope = document.querySelector('.envelope-wrapper');

        function createFloatingHeart() {
            const heart = document.createElement('div');
            heart.className = 'floating-heart';

            // Ensure hearts appear within visible viewport with margin
            const margin = 50; // Keep hearts away from edges
            const randomX = margin + Math.random() * (window.innerWidth - 2 * margin);
            const randomY = margin + Math.random() * (window.innerHeight - 2 * margin);

            heart.style.left = randomX + 'px';
            heart.style.top = randomY + 'px';
            heart.style.position = 'fixed';

            document.body.appendChild(heart);

            // Trigger animation
            setTimeout(() => {
                heart.classList.add('animate');
            }, 10);

            // Remove heart after animation (hearts keep popping)
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            }, 4000);
        }

        function createHeartInArea(x, y) {
            const heart = document.createElement('div');
            heart.className = 'floating-heart';

            heart.style.left = x + 'px';
            heart.style.top = y + 'px';
            heart.style.position = 'fixed';

            document.body.appendChild(heart);

            // Trigger animation
            setTimeout(() => {
                heart.classList.add('animate');
            }, 10);

            // Remove heart after animation (hearts keep popping)
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            }, 4000);
        }

        function createFloatingPicture(imageSrc, startX, startY, finalPosition) {
            const picture = document.createElement('img');
            picture.className = 'floating-picture';
            picture.src = imageSrc;

            // Add random size variation
            const sizes = ['small', '', 'large']; // empty string = default size
            const randomSize = sizes[Math.floor(Math.random() * sizes.length)];
            if (randomSize) {
                picture.classList.add(randomSize);
            }

            // Start from envelope center
            picture.style.left = startX + 'px';
            picture.style.top = startY + 'px';
            picture.style.position = 'fixed';
            picture.style.zIndex = '1000';

            document.body.appendChild(picture);

            // Animate to final position around envelope
            setTimeout(() => {
                picture.style.transition = 'all 2s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                picture.style.left = (startX + finalPosition.x) + 'px';
                picture.style.top = (startY + finalPosition.y) + 'px';
                picture.style.opacity = '1';
                picture.style.transform = 'scale(1) rotate(' + (Math.random() * 20 - 10) + 'deg)';
            }, 100);

            // Start orbiting animation after reaching position
            setTimeout(() => {
                picture.classList.add('orbit');
            }, 2500);
        }

        function createMultiplePictures() {
            const envelopeRect = envelope.getBoundingClientRect();
            const centerX = envelopeRect.left + envelopeRect.width / 2;
            const centerY = envelopeRect.top + envelopeRect.height / 2;

            const pictures = [
                'picture1.jpg', 'picture2.jpg', 'picture3.jpg', 'picture4.jpg',
                'picture5.jpg', 'picture6.jpg', 'picture7.jpg', 'picture8.jpg'
            ];

            // Check if mobile screen
            const isMobile = window.innerWidth <= 768;
            const isSmallMobile = window.innerWidth <= 480;

            // Define positions based on screen size
            let positions;
            if (isSmallMobile) {
                // Closer positions for small mobile screens
                positions = [
                    { x: -120, y: -100 }, // top-left corner
                    { x: 120, y: -100 },  // top-right corner
                    { x: -140, y: -30 },  // far left
                    { x: 140, y: -30 },   // far right
                    { x: -120, y: 80 },   // bottom-left corner
                    { x: 120, y: 80 },    // bottom-right corner
                    { x: 0, y: -140 },    // top-center
                    { x: 0, y: 100 }      // bottom-center
                ];
            } else if (isMobile) {
                // Medium positions for tablets/mobile
                positions = [
                    { x: -160, y: -120 }, // top-left corner
                    { x: 160, y: -120 },  // top-right corner
                    { x: -180, y: -40 },  // far left
                    { x: 180, y: -40 },   // far right
                    { x: -160, y: 100 },  // bottom-left corner
                    { x: 160, y: 100 },   // bottom-right corner
                    { x: 0, y: -180 },    // top-center
                    { x: 0, y: 120 }      // bottom-center
                ];
            } else {
                // Original positions for desktop
                positions = [
                    { x: -400, y: -300 }, // top-left corner
                    { x: 400, y: -300 },  // top-right corner
                    { x: -450, y: -100 }, // far left
                    { x: 450, y: -100 },  // far right
                    { x: -400, y: 250 },  // bottom-left corner
                    { x: 400, y: 250 },   // bottom-right corner
                    { x: 0, y: -450 },    // much higher top-center
                    { x: 0, y: 300 }      // far bottom-center
                ];
            }

            // Create pictures with specific positions
            pictures.forEach((pictureSrc, picIndex) => {
                const position = positions[picIndex % positions.length];

                setTimeout(() => {
                    createFloatingPicture(pictureSrc, centerX, centerY, position);
                }, picIndex * 400); // Stagger each picture by 400ms
            });
        }

        function createMultipleHearts() {
            // Create random hearts
            const heartCount = window.innerWidth <= 480 ? 8 : 12; // Fewer hearts on small screens
            for (let i = 0; i < heartCount; i++) {
                setTimeout(() => {
                    createFloatingHeart();
                }, i * 150);
            }

            // Ensure hearts appear in all corners with mobile-friendly margins
            const margin = window.innerWidth <= 480 ? 50 : 100;
            const corners = [
                { x: margin, y: window.innerHeight - margin - 50 }, // Bottom-left
                { x: window.innerWidth - margin - 50, y: window.innerHeight - margin - 50 }, // Bottom-right
                { x: margin, y: margin }, // Top-left
                { x: window.innerWidth - margin - 50, y: margin } // Top-right
            ];

            corners.forEach((corner, index) => {
                setTimeout(() => {
                    createHeartInArea(corner.x, corner.y);
                }, (heartCount + index) * 150);
            });
        }

        let heartInterval = null; // To track continuous heart generation

        function startContinuousHearts() {
            // Create hearts every 2 seconds while envelope is open
            heartInterval = setInterval(() => {
                createFloatingHeart();
            }, 2000);
        }

        function stopContinuousHearts() {
            if (heartInterval) {
                clearInterval(heartInterval);
                heartInterval = null;
            }
        }

        function clearFloatingElements() {
            // Stop continuous heart generation
            stopContinuousHearts();

            // Clear floating pictures
            const floatingPictures = document.querySelectorAll('.floating-picture');
            floatingPictures.forEach(picture => {
                if (picture.parentNode) {
                    picture.parentNode.removeChild(picture);
                }
            });

            // Clear floating hearts
            const floatingHearts = document.querySelectorAll('.floating-heart');
            floatingHearts.forEach(heart => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            });
        }

        envelope.addEventListener('click', () => {
            const isOpening = !envelope.classList.contains('flap');
            envelope.classList.toggle('flap');

            if (isOpening) {
                // Create floating pictures when opening
                setTimeout(() => {
                    createMultiplePictures();
                }, 600); // Pictures come out first

                // Initial burst of hearts
                setTimeout(() => {
                    createMultipleHearts();
                }, 1200); // Hearts follow after pictures

                // Start continuous heart generation
                setTimeout(() => {
                    startContinuousHearts();
                }, 3000); // Start continuous hearts after initial burst
            } else {
                // Clear both pictures and hearts when closing envelope
                clearFloatingElements();
            }
        });
    </script>
</body>
</html>